# 課題05 APIアプリ
## ①課題内容（Javascript/API）
- 宿泊施設情報の取得とマップへの描画
- 指定したエリア情報を元に、対象となる施設を１０件取得し、BingMap上にInfoboxを表示する
- 最小項目条件(地域)を選択した際、大項目(国)、中項目（県）も指定されていれば該当する施設のリスト取得からマップ描画(Infobox)までの処理を実行
- プルダウンメニューを選び直すとイベントがキックされ、改めて条件に合致する施設リスト１０件を取得しマップ上にInfoboxを再描画し直す（直前に表示があった場合はこれを初期化
 
## ②工夫した点・こだわった点
- 参考にしたサンプルでは複数のInfoboxを生成する際、個々のnew文で実装していたが、このロジックをループ処理で実行させることにより、コードの内容をスッキリすることができた
- Infoboxの配列及びマップ上に描画されたピンを初期化することにより、何度か条件指定を繰り返した際に際限なく増えていってしまう問題を解決

## ③質問・疑問
- 楽天API、BingMap共にサーバー通信の場合は、Promiseで返ってくる仕様らしく、関数化などこの部分を切り出した処理を実行すると、思うように値が入っていなかったり制御が難しかった。今回はこれらの挙動を確認する時間もなかったため、全ての処理を分割せずイベント時の処理内にまとめて記述したが、Promiseの振る舞い、記法などはサーバー通信を制御する上で必須と思うので引き続き理解を深めたい
- 地区コード取得もAPIが用意されており、本来はここで取得したコードを展開した同的なプルダウンメニューを実装したかったが、まだ中身のデータ構造や様式の理解が足らず、時間切れとなった。実現できるよう引き続き調査、確認を行う。

## ④その他（感想、シェアしたいことなんでも）
- 条件指定のプルダウンメニューは、本来、楽天のコード取得APIで全件のコード情報を取得し、それを動的にSelect文内に展開する処理を実装すべきところ、データの構造や処理方法の実装を調査する時間が足らず、地域を限定し、静的に設定する形で実装した
- Firebase　hostingにデプロイ中
　　　   https://test-6e1f7.web.app/pushpin_test.html
- ベース参考サイト： Bing Maps Go 　-　 Show all "Infoboxes" in the area
    　https://mapapi.org/open.php?file=example_infoboxs_in_area&h=3
- 楽天API： 
--楽天トラベル施設検索API 
---https://webservice.rakuten.co.jp/documentation/simple-hotel-search
--楽天トラベル地区コードAPI (戻り値のデータ方・様式などを確認)
---https://webservice.rakuten.co.jp/documentation/get-area-class#inputParameter


